---
id: pun-7201
status: closed
deps: [pun-6a33, pun-8b2d]
created: 2026-02-25T23:48:44Z
type: task
priority: 1
---
# Wire ViewModel to KoAPI + SSE (remove punchlist-server dependency)

Update PunchlistViewModel to use KoAPI (pun-6a33) and SSEManager (pun-8b2d)
instead of PunchlistAPI + WebSocketManager.

## What changes

- ViewModel.start() connects SSE instead of WS
- All CRUD operations go through KoAPI
- Project list comes from `ko project ls --json`
- Toggle needs to check item.done to pick close vs open
- Agent operations go through KoAPI
- Plan questions fetch/submit go through KoAPI (triage command)
- Offline queue / polling fallback updated to use KoAPI
- SSE events trigger item list re-fetch

## Cleanup

- Remove PunchlistAPI.swift (replaced by KoAPI)
- Remove WebSocketManager.swift (replaced by SSEManager)
- Remove punchlist-server dependency entirely
- Update API Surface doc in exocortex notes

## Item model changes

- `ko ls --json` output shape may differ slightly from old punchlist-server
  Item shape â€” need to verify field names and adjust Codable mapping
- Description field: old server read ticket body directly; `ko ls --json`
  includes a `description` field so this should just work
